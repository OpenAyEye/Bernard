# Bernard: A helpful Assistant 

Bernard is a GPT-based chatbot with the ability to run commands from the command line to start programs that have been set up in the environment variables.

We use the new (GPT4) GPT3.5 turbo 0613 function calls to parse responses in a way that allows for easy integration with Python code as function arguments.

Bernard has rudimentary short term and long term memory. Long Term memory recollection needs some fine-tuning, but works when given plenty of context.

Bernard is also capable of digesting, explaining, and outlining youtube videos, tutorials, news articles or short stories.

Bernard has rudimentary dictation skills, 'dictation.py' uses google cloud speech-to-text which requires setting up google-cloud

## Prerequisites

Before running Bernard, make sure you have the following:

- Python 3.11 installed on your system.
- An OpenAI API key to access the GPT3.5 turbo model.
- AWS Polly API credentials for text-to-speech functionality.
- Microsoft Bing Chat Cookies.json

### OpenAI API Key

To obtain an OpenAI API key, follow these steps:

1. Sign in to your OpenAI account or create a new one at [OpenAI website](https://www.openai.com/).
2. Navigate to the API section and generate a new API key.
3. Copy the generated API key.

### AWS Polly API Credentials

To set up your AWS Polly API credentials as environment variables, follow these steps:

1. Sign in to the AWS Management Console or create a new account at [AWS website](https://aws.amazon.com/).
2. Open the IAM (Identity and Access Management) service.
3. Create or locate an IAM user with the necessary permissions for using the Polly service.
4. Obtain the Access Key ID and Secret Access Key for the IAM user.
5. Set the following environment variables:

```
AWS_ACCESS_KEY_ID=<your-access-key-id>
AWS_SECRET_ACCESS_KEY=<your-secret-access-key>
AWS_DEFAULT_REGION=<your-preferred-region>
```
# Setting up Bing:
If you receive the following error, you can try providing a cookie and see if it works then:

Exception: Authentication failed. You have not been accepted into the beta.

### Collect cookies

1. Get a browser that looks like Microsoft Edge.
   - (Easy) Install the latest version of Microsoft Edge.
   - (Advanced) Alternatively, you can use any browser and set the user-agent to look like you're using Edge (e.g., Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/111.0.0.0 Safari/537.36 Edg/111.0.1661.51). You can do this easily with an extension like "User-Agent Switcher and Manager" for Chrome and Firefox.

2. Open [bing.com/chat](https://www.bing.com/chat).
   - If you see a chat feature, you are good to continue.
   - make sure to start a chat. The cookie to bypass captcha won't be generated by just visiting bing.com/chat

3. Install the cookie editor extension for Chrome or Firefox.

4. Go to [bing.com](https://www.bing.com).

5. Open the cookie editor extension.

6. Click "Export" on the bottom right, then "Export as JSON" (This saves your cookies to clipboard).

7. Paste your cookies into a file named `bing_cookies_*.json`.
   - NOTE: The cookies file name MUST follow the regex pattern `bing_cookies_*.json`, so that they could be recognized by internal cookie processing mechanisms.

### Use cookies in code
```python
import json
from EdgeGPT.EdgeGPT import Chatbot

cookies = json.loads(open("./path/to/cookies.json", encoding="utf-8").read())  # might omit cookies option
bot = await Chatbot.create(cookies=cookies)
```

# Setting Up and Acquiring a NewsAPI Key

NewsAPI is a simple HTTP REST API for searching and retrieving live articles from all over the web. To use NewsAPI, you need to obtain an API key. Follow the steps below to get your API key:

### Step 1: Visit the NewsAPI website

Go to the NewsAPI website at [https://www.newsapi.ai/](https://www.newsapi.ai/).

### Step 2: Sign Up

Click on the `Get API Key` button on the home page. This will take you to the sign up page. 

You will need to provide your:

- Full Name
- Email Address
- Desired Password

### Step 3: Verify Your Email

After signing up, you'll need to verify your email address. Check your email for a verification link from NewsAPI. Click the link to verify your account.

### Step 4: Get Your API Key

Once your email is verified, log in to your account. You'll be taken to your account dashboard. 

Here, you'll find your API key in a section labelled `API Key`. 

### Step 5: Using Your API Key

Now you can use your API key to make requests to the NewsAPI. Be sure to include your API key in the header of your requests like so:

``` python
headers = { 'X-Api-Key': 'YOUR_API_KEY' # Replace 'YOUR_API_KEY' with your actual API key }
```

### Important Note

Please be aware that the free tier of NewsAPI allows a limited number of requests per day. If you need to make more requests, consider upgrading to a paid plan.

Remember to keep your API key secure and do not share it with others.

# Setting up Google Cloud Text-to-Speech API
######  - only necessary for dictate.py usage, not needed for 'how_dat_dictatE.py'
## Setup

1. Make sure you have created a Google Cloud project and enabled the Speech-to-Text API.

2. Create a service account key by following these steps:

   - Go to the [Google Cloud Console](https://console.cloud.google.com/)
   - Select your project from the dropdown menu.
   - Navigate to the "IAM & Admin" > "Service Accounts" page.
   - Click on "Create Service Account".
   - Provide a name and description for the service account, and click on "Create".
   - Under "Service Account Permissions", select the necessary roles for the service account (e.g., "Speech-to-Text Admin" or "Speech-to-Text Viewer").
   - Click on "Continue" and then "Done".
   - On the "Service Accounts" page, find the newly created service account and click on the three-dot menu icon under "Actions".
   - Choose "Create Key".
   - Select the key type as JSON and click on "Create". This will download the JSON file containing the credentials.

3. Add the JSON file location to the config.env
4. make sure you enable text to speech api

## Getting Started With Bernard.

Clone the Bernard repository:

```bash
git clone https://github.com/OpenAyEye/Bernard.git
```

Navigate to the project directory:

```bash
cd Bernard
```

Install the required dependencies using pip:

```bash
pip install -r requirements.txt
```

Change config.txt to config.env file in the project directory and modify the following contents:

```
OpenAiKey="<your-openai-api-key>"
news_api_key="<your-news-api-key>"
```

- Replace `<your-openai-api-key>` with the API key you obtained from OpenAI.
- Replace `<your-news-api-key>` with the API key you obtained from newsapi.ai 
- Ensure that your AWS Polly API credentials are properly set as environment variables as mentioned earlier.

Run the Bernard chatbot:

```bash
python main.py
```

### Usage

Bernard listens for voice input via the microphone. Once started, Bernard will prompt you for input.
You can ask questions or provide instructions to Bernard.
If a command is recognized in your input, Bernard will execute it from the command line.

 - Bernard will only respond when addressed directly. "Bernard, what is the capital of New Mexico?" or, "how many planets are in our solar system, Bernard?"
 - To exit, tell Bernard you'd like to quit, exit, or end the program, etc. He's pretty smart, he'll usually know what you mean..
 - Ask Bernard to "look something up online" or, "Check the internet" or about current events and he can now access bing chat and look things up online :)
 - Ask Bernard to open/close/run applications and programs on your computer. 
 - - you May need to add applications/programs to the environment variables of your computer.
 - - Bernard instinctively knows what command line inputs to use for programs and applications, keep in mind if you have custom installs.
 - Ask Bernard for a news update and he'll give you 5 headlines from top categories of news.
### Contributing

Contributions are welcome! If you find any issues or have suggestions for improvement, please feel free to submit a pull request.

### License
```
This project is licensed under the MIT License.
just give me a lil credit at the @openayeye handle :) thanks
```
